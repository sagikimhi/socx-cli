---
# -----------------------------------------------------------------------------
# Category: Language/Filetype
# -----------------------------------------------------------------------------
#
# An array of language element tables where each table specifies a small
# subset of language features.
#
# Each language is identified by name, and is linked by the configured set of
# possible filetype extensions.
#
lang:
  systemverilog:
    name: "systemverilog"
    extensions:
      - .sv
      - .svh
    syntax:
      indent: 4
      comments:
        - line: "//"
        - block:
            begin: "/*"
            end: "*/"
  lst:
    name: "lst"
    extensions:
      - ".lst"
      - ".list"
    syntax:
      indent: 4
      comments:
        - line: "//"
        - block:
            begin: "/*"
            end: "*/"
    tokens:
      - name: "comment"
        expr: "([#])(?!([A-Z]{2,}))(?P<content>.*)"
        subst: "
          @format {this.lang.systemverilog.syntax.comments.line} \\g<content>
          "
        starts_scope: false
      - name: "group"
        expr: '([#])(?P<mem>NVM|ROM)(\W+)(?P<device>[A-Z]{2,})'
        subst: "
          covergroup cg__\\g<device>_\\g<mem>_access;

          cp__\\g<device>_\\g<mem>_func: coverpoint { vif.\\g<device>_\\g<mem>_addr }

          {
          "
        scope_ender: "
          bins NoFunc = default;
          }"
        endgroup: "cg__\\g<device>_\\g<mem>_access"
        starts_scope: true
      - name: "statement"
        expr: '0x(?P<addr>[0-9a-fA-F]+)\\W+(?P<func>\\w+)\\W+(?P<len>\\d+)(?P<other>.*)'
        subst: "
          bins \\g<func> = { [ (('h\\g<addr> - 'h{{ base }}) >> 1) : ((('h\\g<addr> - 'h{{base}} + 'd\\g<len>) >> 1) - 1) ] };
          "
        starts_scope: false
