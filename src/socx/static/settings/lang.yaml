---
# -----------------------------------------------------------------------------
# Category: Language/Filetype
# -----------------------------------------------------------------------------
#
# An array of language element tables where each table specifies a small
# subset of language features.
#
# Each language is identified by name, and is linked by the configured set of
# possible filetype extensions.
#
lang:
  systemverilog:
    name: "systemverilog"
    extensions:
      - .sv
      - .svh
    syntax:
      indent: 4
      comments:
        line: "//"
        block:
          begin: "/*"
          end: "*/"
  lst:
    name: "lst"
    extensions:
      - ".lst"
      - ".list"
    syntax:
      indent: 4
      comments:
        line: "//"
        block:
          begin: "/*"
          end: "*/"
    tokens:
      - name: "comment"
        starts_scope: false
        expr: >-
          ([#])(?!([A-Z]{2,}))(?P<content>.*)
        subst: |
          @jinja {{  this.lang.systemverilog.syntax.comments.line }} \g<content>

      - name: "group"
        starts_scope: true
        expr: >-
          ([#])(?P<mem>NVM|ROM)(\W+)(?P<device>[A-Z]{2,})
        subst: |

          covergroup cg__\g<device>_\g<mem>_access;
          \tcp__\g<device>_\g<mem>_func:
          \tcoverpoint vif.\g<device>_\g<mem>_addr {

        scope_ender: |
          \t\tbins NoFunc = default;
          \t}
          endgroup : cg__\g<device>_\g<mem>_access

      - name: "statement"
        starts_scope: false
        expr: >-
          0x(?P<addr>[0-9a-fA-F]+)\W+(?P<func>\w+)\W+(?P<len>\d+)(?P<other>.*)
        subst: |
          \t\tbins \g<func> = {[
          \t\t\t(('h\g<addr> - 'h{{ base }})) : (('h\g<addr> - 'h{{ base }} + 'd\g<len>) - 1)
          \t\t]};
